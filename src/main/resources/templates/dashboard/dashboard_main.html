<html layout:decorate="~{layout_page}" xmlns:layout="http://www.w3.org/1999/xhtml">
<style>
  .section-item{
    order: 0;
  }
</style>
<th:block layout:fragment="content">

  <!--- (레이아웃) Contents 영역 -->
  <div class="layout-contents">
    <!-- Page Title -->
    <div class="page-title-wrap">
      <div class="left">
        <h2>Order Management Dashboard</h2><a id="toggleButton" onclick="toggleSearchWrap()"><img src="/images/icon/ico-down.png"
                                                                                                  alt="알람 아이콘"></a>
        <!--                <a title="북마크" class="bookmark toggle">-->
        <!--                    내 메뉴-->
        <!--                </a>-->
      </div>
      <ul class="page-navi">
        <li><img src="/images/icon/ico-nav-home.svg" alt="홈아이콘"></li>
      </ul>
    </div>
    <!-- Select -->
    <div class="search-wrap" id="searchWrap" style="display: none">
      <ul>
        <li>
          <select title="지역">
            <option>대구</option>
          </select>
        </li>
        <li>
          <select title="구">
            <option>성서산단</option>
          </select>
        </li>
        <li>
          <select title="동">
            <option>성서</option>
          </select>
        </li>
      </ul>
      <div class="card-btn-wrap">
        <div class="btn swiper-button-prev"></div>
        <div class="btn swiper-button-next"></div>
        <a title="카드설정" class="btn btn-popup-open" data-popup="popup1">
          <img src="/images/icon/btn-setting.svg" alt="설정아이콘">
        </a>
      </div>
    </div>
    <div class="row row-1" style="margin-bottom: 0;">
      <div class="card-wrap swiper card-swiper">
        <div class="swiper-wrapper">
          <div class="swiper-slide">
            <section>
              <div class="title">
                <h3>매출액</h3>
                <a href="#" title="더보기" class="btn-plus"></a>
              </div>
              <dl>
                <dt>LNG사용량</dt>
                <dd>
                  9,999 <span class="unit">Nm³</span>
                </dd>
              </dl>
              <dl>
                <dt>전일대비</dt>
                <dd>
                  <span class="down"></span> 1.20 <span class="unit">%</span>
                </dd>
              </dl>
            </section>
          </div>
          <div class="swiper-slide">
            <section>
              <div class="title">
                <h3>수주액</h3>
                <a href="#" title="더보기" class="btn-plus"></a>
              </div>
              <dl>
                <dt>전기생산량</dt>
                <dd>
                  9,999 <span class="unit">kWh</span>
                </dd>
              </dl>
              <dl>
                <dt>전일대비</dt>
                <dd>
                  <span class="up"></span> 2.20 <span class="unit">%</span>
                </dd>
              </dl>
            </section>
          </div>
          <div class="swiper-slide">
            <section>
              <div class="title">
                <h3>견적진행</h3>
                <a href="#" title="더보기" class="btn-plus"></a>
              </div>
              <dl>
                <dt>열 생산량</dt>
                <dd>
                  9,999 <span class="unit">Mcal</span>
                </dd>
              </dl>
              <dl>
                <dt>전일대비</dt>
                <dd>
                  <span class="down"></span> 1.20 <span class="unit">%</span>
                </dd>
              </dl>
            </section>
          </div>
          <div class="swiper-slide">
            <section>
              <div class="title">
                <h3>견적요청</h3>
                <a href="#" title="더보기" class="btn-plus"></a>
              </div>
              <dl>
                <dt>전기효율</dt>
                <dd>
                  45.5 <span class="unit">%</span>
                </dd>
              </dl>
              <dl>
                <dt>열효율</dt>
                <dd>
                  39.0 <span class="unit">%</span>
                </dd>
              </dl>
            </section>
          </div>
          <div class="swiper-slide">
            <section>
              <div class="title">
                <h3>제작진행</h3>
                <a href="#" title="더보기" class="btn-plus"></a>
              </div>
              <dl>
                <dt>예상수익</dt>
                <dd>
                  999,999 <span class="unit">원</span>
                </dd>
              </dl>
              <dl>
                <dt>전일대비</dt>
                <dd>
                  <span class="up"></span> 1.20 <span class="unit">%</span>
                </dd>
              </dl>
            </section>
          </div>
          <div class="swiper-slide">
            <section>
              <div class="title">
                <h3>매축액</h3>
                <a href="#" title="더보기" class="btn-plus"></a>
              </div>
              <dl>
                <dt>LNG사용량</dt>
                <dd>
                  9,999 <span class="unit">Nm³</span>
                </dd>
              </dl>
              <dl>
                <dt>전일대비</dt>
                <dd>
                  <span class="down"></span> 1.20 <span class="unit">%</span>
                </dd>
              </dl>
            </section>
          </div>
          <div class="swiper-slide">
            <section>
              <div class="title">
                <h3>수주액</h3>
                <a href="#" title="더보기" class="btn-plus"></a>
              </div>
              <dl>
                <dt>전기생산량</dt>
                <dd>
                  9,999 <span class="unit">kWh</span>
                </dd>
              </dl>
              <dl>
                <dt>전일대비</dt>
                <dd>
                  <span class="up"></span> 2.20 <span class="unit">%</span>
                </dd>
              </dl>
            </section>
          </div>
          <div class="swiper-slide">
            <section>
              <div class="title">
                <h3>견적진행</h3>
                <a href="#" title="더보기" class="btn-plus"></a>
              </div>
              <dl>
                <dt>열 생산량</dt>
                <dd>
                  9,999 <span class="unit">Mcal</span>
                </dd>
              </dl>
              <dl>
                <dt>전일대비</dt>
                <dd>
                  <span class="down"></span> 1.20 <span class="unit">%</span>
                </dd>
              </dl>
            </section>
          </div>
          <div class="swiper-slide">
            <section>
              <div class="title">
                <h3>견적요청</h3>
                <a href="#" title="더보기" class="btn-plus"></a>
              </div>
              <dl>
                <dt>전기효율</dt>
                <dd>
                  45.5 <span class="unit">%</span>
                </dd>
              </dl>
              <dl>
                <dt>열효율</dt>
                <dd>
                  39.0 <span class="unit">%</span>
                </dd>
              </dl>
            </section>
          </div>
          <div class="swiper-slide">
            <section>
              <div class="title">
                <h3>제작진행</h3>
                <a href="#" title="더보기" class="btn-plus"></a>
              </div>
              <dl>
                <dt>예상수익</dt>
                <dd>
                  999,999 <span class="unit">원</span>
                </dd>
              </dl>
              <dl>
                <dt>전일대비</dt>
                <dd>
                  <span class="up"></span> 1.20 <span class="unit">%</span>
                </dd>
              </dl>
            </section>
          </div>
        </div> <!--//swiper-wrapper end -->
      </div> <!--//main-card-wrap end -->
    </div>
    <div class="row row-2">
      <div class="col wp100">
        <section>
          <div class="title-wrap">
            <!--<h3>시간대별 현황</h3>-->
            <ul class="tab-links-sub">
              <li>
                <a href="#tab1" title="매출액"></a>
              </li>
              <li>
                <a href="#tab2" title="수주액"></a>
              </li>
              <li>
                <a href="#tab3" title="견적진행"></a>
              </li>
              <li>
                <a href="#tab4" title="견적요청"></a>
              </li>
            </ul>
          </div>

          <div class="tab-contents" style="display: flex; flex-wrap: wrap; flex-direction: column; gap: 20px; margin-bottom: 10%;">
            <div class="tab-row" style="display: flex; width: 100%; gap: 20px; margin-bottom: 3px;">
              <section style="width: 50%; box-sizing: border-box;">
                <!--tab1-->
                <div class="tab-item-sub h280" id="tab1">
                  <h3>매출액</h3>
                  <div class="chart-wrap">
                    <img src="/images/sample/sample-chart.svg" alt="">
                  </div>
                </div>
              </section>
              <section style="width: 50%; box-sizing: border-box;">
                <!--tab2-->
                <div class="tab-item-sub h280" id="tab2">
                  <h3>수주액</h3>
                  <div class="chart-wrap">
                  </div>
                </div>
              </section>
            </div>
            <div class="tab-row" style="display: flex; width: 100%; gap: 20px;">
              <section style="width: 50%; box-sizing: border-box;">
                <!--tab3-->
                <div class="tab-item-sub h280" id="tab3">
                  <h3>견적진행</h3>
                  <div class="chart-wrap">
                  </div>
                </div>
              </section>
              <section style="width: 50%; box-sizing: border-box;">
                <!--tab4-->
                <div class="tab-item-sub h280" id="tab4">
                  <h3>견적요청</h3>
                  <div class="chart-wrap">
                  </div>
                </div>
              </section>
            </div>
          </div>

        </section>
      </div>
    </div>
  </div> <!--//layout-contents end -->
  <footer>
    <p>Copyrightⓒ 0000 corp. All rights reserved.</p>
  </footer>
  </div>

  <div style="height: 10px"></div>

  <!-- [대시보드] 팝업  -->
  <div class="dashboard-layout-popup">
    <div class="popup-overlay"></div>
    <div class="popup-wrapper wp80" id="popup1">
      <div class="popup-title">
        <h3>카드 수정</h3>
        <a title="팝업닫기" class="btn-popup-close">
          <img src="/images/icon/btn-popup-close.svg" alt="닫기">
        </a>
      </div>
      <div class="popup-contents">
        <div class="card-wrap card-edit-wrap" id="cardwrap">
          <div class="gesture-box">
            <img src="/images/icon/ico-gesture.png" alt="제스처 안내">
          </div>
          <section class="section-item" data-title="INPUT1">
            <div class="title">
              <h3>INPUT1</h3>
              <a title="숨김" class="btn-hidden"></a>
            </div>
            <dl>
              <dt>LNG사용량</dt>
              <dd>
                9,999 <span class="unit">Nm³</span>
              </dd>
            </dl>
            <dl>
              <dt>전일대비</dt>
              <dd>
                <span class="down"></span> 1.20 <span class="unit">%</span>
              </dd>
            </dl>
          </section>
          <section class="section-item" data-title="Elec. OUTPUT">
            <div class="title">
              <h3>Elec. OUTPUT</h3>
              <a title="숨김" class="btn-hidden"></a>
            </div>
            <dl>
              <dt>전기생산량</dt>
              <dd>
                9,999 <span class="unit">kWh</span>
              </dd>
            </dl>
            <dl>
              <dt>전일대비</dt>
              <dd>
                <span class="up"></span> 2.20 <span class="unit">%</span>
              </dd>
            </dl>
          </section>
          <section  class="section-item" data-title="Heat OUTPUT">
            <div class="title">
              <h3>Heat OUTPUT</h3>
              <a title="숨김" class="btn-hidden"></a>
            </div>
            <dl>
              <dt>열 생산량</dt>
              <dd>
                9,999 <span class="unit">Mcal</span>
              </dd>
            </dl>
            <dl>
              <dt>전일대비</dt>
              <dd>
                <span class="down"></span> 1.20 <span class="unit">%</span>
              </dd>
            </dl>
          </section>
          <section  class="section-item" data-title="F/C Efficiency">
            <div class="title">
              <h3>F/C Efficiency</h3>
              <a title="숨김" class="btn-hidden"></a>
            </div>
            <dl>
              <dt>전기효율</dt>
              <dd>
                45.5 <span class="unit">%</span>
              </dd>
            </dl>
            <dl>
              <dt>열효율</dt>
              <dd>
                39.0 <span class="unit">%</span>
              </dd>
            </dl>
          </section>
          <section  class="section-item" data-title="INCOME">
            <div class="title">
              <h3>INCOME</h3>
              <a title="숨김" class="btn-hidden"></a>
            </div>
            <dl>
              <dt>예상수익</dt>
              <dd>
                999,999 <span class="unit">원</span>
              </dd>
            </dl>
            <dl>
              <dt>전일대비</dt>
              <dd>
                <span class="up"></span> 1.20 <span class="unit">%</span>
              </dd>
            </dl>
          </section>

          <section  class="section-item" data-title="Heat OUTPUT2">
            <div class="title">
              <h3>Heat OUTPUT2</h3>
              <a title="숨김" class="btn-hidden"></a>
            </div>
            <dl>
              <dt>열 생산량</dt>
              <dd>
                9,999 <span class="unit">Mcal</span>
              </dd>
            </dl>
            <dl>
              <dt>전일대비</dt>
              <dd>
                <span class="down"></span> 1.20 <span class="unit">%</span>
              </dd>
            </dl>
          </section>
          <section  class="section-item" data-title="F/C Efficiency2">
            <div class="title">
              <h3>F/C Efficiency2</h3>
              <a title="숨김" class="btn-hidden"></a>
            </div>
            <dl>
              <dt>전기효율</dt>
              <dd>
                45.5 <span class="unit">%</span>
              </dd>
            </dl>
            <dl>
              <dt>열효율</dt>
              <dd>
                39.0 <span class="unit">%</span>
              </dd>
            </dl>
          </section>
          <section class="card-hidden section-item" data-title="INCOME2">
            <div class="title">
              <h3>INCOME2</h3>
              <a title="숨김" class="btn-hidden"></a>
            </div>
            <dl>
              <dt>예상수익</dt>
              <dd>
                999,999 <span class="unit">원</span>
              </dd>
            </dl>
            <dl>
              <dt>전일대비</dt>
              <dd>
                <span class="up"></span> 1.20 <span class="unit">%</span>
              </dd>
            </dl>
          </section>
        </div> <!--//swiper-wrapper end -->
      </div>
      <div class="popup-button">
        <button class="btn-popup-close">취소</button>
        <button class="btn-navy" id="btnSave">저장</button>
      </div>
    </div>
  </div>
  <script type="text/javascript">
    document.readyState === 'complete' ? init() : window.onload = init;

    <!-- 초반 페이지 진입시 그리드 바인딩 끝-->
    function init() {
      initializeSelections();
      initializeCharts();
    }

    function initializeCharts() {
      var chartVars = "rMateOnLoadCallFunction=chartReadyHandler";
      rMateChartH5.create("chart1", "chartHolder1", chartVars, "100%", "100%");
      rMateChartH5.create("chart2", "chartHolder2", chartVars, "100%", "100%");
    }

    $('#btnSave').click(function(){
      const parent = document.getElementById('cardwrap');

      const sections = Array.from(document.querySelectorAll('.section-item'));

      const sectionData = [];

      sections.forEach((section, index) => {
        const dataTitle = section.getAttribute('data-title');
        const dataid = section.getAttribute('data-id');
        const isHidden = section.classList.contains('card-hidden');
        const visible = !isHidden;

        sectionData.push({
          id: dataid,
          orderNum: index + 1,
          title: dataTitle,
          visible: visible

        });
      });

      console.log('testest', sectionData);

      fetch('/api/common/Card/Save', {
        method: 'POST',
        headers: {
          "Content-Type": "application/json",
          "X-CSRF-TOKEN": csrfToken
        },
        body: JSON.stringify(sectionData)
      })
              .then(response => response.json())
              .then(data => {
                Alert.alert('', '저장되었습니다.');
              })
              .catch(error => {
                Alert.alert('', '에러가 발생하였습니다.');// 에러 처리
              });

    });
  </script>
</th:block>
</html>
